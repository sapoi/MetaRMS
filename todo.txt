
-----------------------
ğŸ™ˆ NOT SUPPORTED
    - validace min u referenci na klientovi (bootstrap-select nema implementovano -> pro min=1 je pot5eba nastavit required=true)
    - unique
    - search
    - moznost seradit zobrazena data
    - lazy loadig zobrazenych dat
    - pridat typ backgroundcolor - bude jako color, pro kadzy dataset max jedna -> pokud bude tento dataset referencovany nekde, tak se ta reference podbarvi tou barvou, jakou ma ten radek datasetu nastavenou jako background color
    - _editbuilderpartial -> data-subtext=" "

ğŸ•“ FURTHER WORK
    - join and parametrize create, update and delete methods due to code duplicity for data, users and rights on both server and client
    - povolit uzivatelum zpetne editovat nektere casti application descriptoru (napr popisy datasetu)
    - add support for HttpPatch to allow partial updates
    - renumber error codes for more logic
    - support for patch not just put
    - dodelat testy

-----------------------
TODO
    - remove == "username" and == "password" from code
    - pro typ bool je nullable vzdy true - proc?
    - tocici se kolecko pri validaci aplikace
    - vytvoreni admina porusi required u system user datasetu dat - vsechny hodnoty ma nevyplnene
    - zdokumentovat parametry v controllerech
    - napsat kdyz pri login se neda pripojit k "serveru" - ted to spadne
    - delsi doba prihlaseni - delsi platnost tokenu
    - salt to passwords
    - kdyz je default heslo, vyzadovat zmenu na safe
        - âœ´ï¸ zmena hesla - nekontrolovat delku/spec znaky stareho hesla - vyresi se zavedenim vynuceni zmeny default hesla
    - zobrazovat nekde jmeno prihlaseneho uzivatele - too complicated - v pages nemam user
    - âœ´ï¸ğŸ”¥ğŸ”¥ğŸ”¥ pridat detail dat - po kliknuti na referenci - nutne - kdyz ma uzivatel pouze R prava, nezobrazil by se mu detail pomoci edit
    - ValueList jako dict <string, ...>
                C  U          x    odesilat model
        data    âœ… âœ…                   âœ…
        users   âœ… âœ…                   âœ…
        rights  âœ… âœ…                   âœ…
        settings              âœ…        âœ…
        defaultpasswordchange âœ´ï¸        âœ´ï¸
    - â—ï¸ refresh token (https://www.blinkingcaret.com/2018/05/30/refresh-tokens-in-asp-net-core-web-api/)
    
    REFAKTORING
        - rozdelit accesshepler 
        - pomocne app init metody z kontrolleru nekam jinam
        - presunout getTextForReference
        
    JAVASCRIPT
        - ğŸ”¥ javascript popup okna pri delete, ...
        - ğŸ”¥ users alert jestli doopravdy vyresetovat heslo
        ï¸- ğŸ”¥ new password equal validation
        - prilinkovat skripty 1.10. str 20

    MULTILINGUAL SUPPORT
        - preklady: nazvy tlacitek, rights dataset, rights.get nazvy sloupcu tabluky, settings
        - uzivatelum pridat jazyk a pri vytvreni uzivatale nastavit jako default jazyk aplikace + do settings dat zmenu jazyka
        - Message.GetMessage() pouzivat language

    DESIGN
        - footer
        - MOBILE VERSION
            - hamburger button in iphone
            - smaller page margin
            - no table border
            - menu without bullets
            - menu larger spaces between lines
            - logout menu not as list


    DELETE
        - âœ… ondelete action tam, kde jsou referencovani uzivatele nesmi byt cascade, aby se nevzmazal i posledni uzivatel aplikace
        - âœ… set empty na requierd atributu
        - âœ… pouze pro mazani dat a uzivatelu (rights uz se kontroluji a mohou byt referencovane jen u uzivatelu jako fk v db)
        - âœ… mazani dat - gkeep
            - âœ… pri mazani uzivatelu/dat kontrolovat, jestli na ne nekde nevede reference
        - ğŸ§¡ on delete actions (cca https://dev.mysql.com/doc/refman/8.0/en/create-table-foreign-keys.html):
            - I want to delete rowA from table1 and rowA is referenced in table2, if attribute in table@ containing rowA as reference has onDelete set to:
                - cascade - rowA will be deleted, all rows referencing rowA in table2 will be deleted
                - setEmpty - rowA will be deleted, all values of attributess referencing rowA in table2 will be set to empty
                - protect - no rows will be deleted
            - what if rowA is referenced anywhere else?
                - first check whereever rowA can be referenced and the onDelete settings -> do not start delete before this
                - check if it really is referenced
                - then 
                    - if anything is protect return message and do not delete anything
                    - if anything is cascade, check if cascade can be deleted the same way as checking if rowA can be deleted
                    - if everything is setEmpty, delete and set empty
        - âœ… uz je? - pri editu a updatu kontrolovat ze reference existuji i na serveru

-----------------------
TEXT
    - â¡ï¸ zkusit napsat uvod k bp v anglictine
    - ğŸ”¥ â¡ï¸ bodova osnova
        - ta 1. kapitola v budoucim case (plan toho, co se bude delat)
    - ğŸ”¥ â¡ï¸ konkurence?
    - dokumentacni komentare
    - konkurence
    - uziv dok jako tutorial
    - 2 ukazkove aplikace
    - 3 uzivatele - programatori co chcou pripojit aplikaci (mobilni), admini, knihovnice
    ! pustit nekde na webu
    - â¡ï¸ verejne zpristupnit nekolik ukazkovych aplikaci s jsonem a prihlasovacimi udaji na R prava ke vsem datasetum
    radkovani ne 2, ale 1 nebo 1.25
    - psat to postupne od zacatku a ne na preskacku
    - napsat uz ted podrobnou osnovu ke vsemu
    - vice prikladu v uvoduv uvodu napsat, co by mohli vsechno uzivatele chtit a potrebvat
    - v requirements to rozepsat a az nakonec dat seznam tect 
    
    - jak jsem resila validace pomoci messagi, ale vlastne by to slo pomoci modelstate, ale neslo
        - mohla jsem pouzit na validaci a prenaseni dat a erorru modelstate, ale vzhledem k tomu, ze pro jednotlive typy uzivatelem def 
          dat ve slovnicich nemuzu uvadet validation atributy, ma pro me vetsi smzsl si validace a errory posilat sama, navic ne vzdy 
          se errory poji k nejakemu poli (viz errory bez atributu) -  https://exceptionnotfound.net/asp-net-mvc-demystified-modelstate/
    - client side authentication - token validation https://auth0.com/docs/api-auth/tutorials/verify-access-token

    - udelat to jako web service
        - soap - XML a ja mam json
        - rest - ??

-----------------------
HOTOVO
    - âœ… prava nemi jit samzat, pokud je nekdo pouziva 
    - âœ… zobrazit mesage ze prava nebyla smazana 
    - âœ… crud uzivatele 
    - âœ… partial na menu logged 
    - âœ… partial menu unlogged
    - âœ… db ondelete restrict 
    - âœ… odkomentovat posilani mailu
    - âœ… partial na read auth datasets 
    - âœ… data controllers do slozky
    - âœ… vyzkouset data delete 
    - âœ… dodelat [Authorize] nad controllery
    - âœ… prodlouzit token
    - âœ… message pro data
    - âœ… rights patch messages
    - âœ… servererror.cshtml.cs - error stranky 2x
    - âœ… misto return to login page by melo byt nejprve odhlaseni a pak return
    - âœ… napsat varovani k init page
    - âœ… app name validator pred app init
    - âœ… posledni user nesmazatelny
    - âœ… chyba pri spatne zadanem hesle login
    - âœ… rights unique name
    - âœ… username unique
    - âœ… message o vytvoreni app z appinit do index
    - âœ… proc je get u login controlleru
    - âœ… user settings zmena hesla
    - âœ… misto hesla zobrazovat * index a login -> type="password"
    - âœ… edit user nezobrazovat hash u edit
    - âœ… app init kontrola validity mailu
    - âœ… napsat popis do about page
    - âœ… settings zmena hesla - zmenit aby tam bylo puvodni heslo 1x a nove heslo 2x
    - âœ… user edit check box na zmenu hesla -> ne, udelat tam tlacitko na reset hesla na nejakou defaultni hodnotu a tu si pak muze uzivatel zmenit ve svem nastaveni po prihlaseni -> default hodnota bude username
    - âœ… user additional data 
    - âœ… pouzivat description z jsonu
    - âœ… v Users dat rights tak, aby si ho mohl kazdy pojmenovat podle sebe - asi ok - rights muzou mitt jmeno
    - âœ… typy (username, float, string, ...) dat do enumu - NE musel by se zavest type "reference" a novy attribute characteristic rikajici typ reference
    - âœ… create user default heslo
    - âœ… repozitare
    - âœ… form resubmission
    - âœ… nejde create datasetu s referencema
    - âœ… odstranit z users reference
    - âœ… nejdou users
    - âœ… test repozitaru
    - âœ… pouzivat description datasetu
    - âœ… reference       R  C/U
        - users v data  âœ…  âœ… 
        - data v users  âœ…  âœ… 
        - data v data   âœ…  âœ… 
    PODPORA TYPU
        - âœ… zmenit int na type number a min 0
        - âœ… klient zobrazovat vstupy podle typu
        - âœ… validace user data na klientovi 
        - âœ… validace pri vytvareni dat na klientovi - pomoci html
        - âœ… validace pri editu dat na klientovi  - pomoci html 
        - âœ… app init vytvareni user dat admina
        - âœ… podminky hesla (helka, znaky, ...)
        - âœ… odkazy na user datasety
        - âœ… nezobrazovat ID, ale nejake hodonty
            - âœ… reference na reference na reference otestovat
        - âœ… odstranit autoincrement
        - âœ… user patch unique name
    - âœ… Users textik brat z deskriptoru
    - âœ… vyresit async await
    - âœ… value list indexovat stringama nazven atributu a ne cisly
    - âœ… na serveru validace u controlleru dat zvlast
    - âœ… misto edit dat patch, jen popisek buttonu bude edit
    - âœ… nepouzivat v controllerech appName, ale brat id z claimu
    - âœ… prejmenovat ApplicationDescriptor.LoginAppName a .AppName na (Login)ApplicationName
    - âœ… prejmenovat LoginCredentials.ApplicationName na .LoginApplicationName
    - âœ… u dat vracet unauthorized pokud rights = none
    - âœ… ruzne druhy message - info, warneni, error
    - âœ… validace vstupu na klientovi podle app deskriptoru - co nezvaliduje html5?
    - âœ… pattern na type="tel" + popis do enumu
    - âœ… popis validni type="url"
    - âœ… reference user-user
    - âœ… validovat prava - musi mit min R na vsechny navazane datasety datasetu, na ktery ma nim R
    - âœ… validace user data na serveru
    - âœ… validace dat dat na serveru
    - âœ… odstranit login stranku - misto ni je index
    - âœ… nejdou videt polozky menu na mobilu
    - âœ… spojit rights, user a data servicy do jedne -> pridat baseservice
    - âœ… pouzivat [HttpPut]
    - âœ… mazani delat pres httpdelete
    - âœ… Server.Helpers.AuthHelper - Authorize prejmenovat na IsAuthorized a presunout do SharedLibrary
        - âœ… prepsat authorization v pages
    - âœ… JSON VALIDACE
        - âœ… json schema https://www.newtonsoft.com/jsonschema
        - âœ… app init kontrola ze je vzdy soubor v controlleru
        - âœ… validace DefaultLang - vytvorit enum a kontrolovat proti nemu
        - âœ… kontrolovat, ze je ondeleteaction z enumu
        - âœ… validace deskriptoru ye obsahuje app name a vsechno ostatni co je povinne 
        - âœ… validace typu username:
            - âœ… v user datasetu a pouze 1x
            - âœ… nikde jinde
            - âœ… required
            - âœ… unique
        - âœ… validace type password:
            - âœ… v user datasetu . password attributes a pouze 1x
            - âœ… nikde jinde
            - âœ… required
            - âœ… musi byt typu password
        - âœ… vsechny atributy:
            - âœ… kontrolovat, zda reference existuji
            - âœ… min mensi nez max
            - âœ… max > 0 pokud vyplnene
            - âœ… min > 0 pokud vyplnene
            - âœ… kdyz je atribut reference, musi mit ondeleteaction
            - âœ… ondelete action tam, kde jsou referencovani uzivatele nesmi byt cascade, aby se nevzmazal i posledni uzivatel aplikace
            - âœ… safer pouze u password
            - âœ… ondeleteaction pouze u referenci
            - âœ… reference nesmi mit min>0 a required false
            - âœ… ondeleteaction setempty nesmi byt na requierd atributu nebo attributu s min > 0
        - âœ… datasety
            - âœ… musi byt alespon jedna required polozka
            - âœ… unique jmena - zadne datasety se nesmi jmenovat stejne
            - âœ… datasety se nesmi jmenovat jako basic typy
            - âœ… nazvy datasetu nesmi obsahovat {cislo} (kvuli replaci messagi)
            - âœ… atributy - unique jmena v ramci datasetu - kazdy atribut v ramci datasetu musi mit unikatni jmeno
        - âœ… nenastavene polozky
            - âœ… u referenci kdyz je min a neni required, nastavit i requierd na true
            - âœ… u referenci kdyz je required a neni min, nastavit min na 1
            - âœ… nastavovat datasetum id
            - âœ… nastavovat user datasetu id
            - âœ… nevyplnene unique, required nastavit na false
            - âœ… pokud nevyplnene safer u password, tak nastavit na false
        - âœ… co muze byt null po ulozeni descriptoru?
            - âœ… jakukoli description, attribute . min, max, safer, ondeleteaction
        - âœ… app init validace puvodni popisy
            - â™»ï¸ datasety se nesmi jmenovat jako basic typy
            - â™»ï¸ nazvy datasetu nesmi obsahovat {cislo} (kvuli replaci messagi)
            - â™»ï¸ kazdy atribut v ramci datasetu musi mit unikatni jmeno
            - â™»ï¸ zadne datasety se nesmi jmenovat stejne
            - â™»ï¸ username je typu username a password typu password a kazde muze byt v user datasetu prave 1x
            - â™»ï¸ username automaticky nastavit unique
            - â™»ï¸ username a passvord vzdy nastavit na required
            - â™»ï¸ kdyz neni nastaveno required/unique, nastavi se pri initu na false
            - â™»ï¸ v kazdem datasetu musi byt alespon jedna required polozka
            - â™»ï¸ pro typ user dataset se da required nahradit min
            - â™»ï¸ kontrolovat, zda reference existuji
            - â™»ï¸ kdyz je v min > 0, nastavit required na true
            - â™»ï¸ co neni true je null = false
            - â™»ï¸ min mensi nez max
            - â™»ï¸ kdyz je min a neni required, nastavit i requierd
            - â™»ï¸ kdyz je atribut reference, musi mit ondeleteaction 
            - â™»ï¸ ondelete action tam, kde jsou referencovani uzivatele nesmi byt cascade, aby se nevzmazal i posledni uzivatel aplikace
            - â™»ï¸ nastavovat user datasetu id - AppInitController
            - â™»ï¸ temer jakakoli hodnota atributu muze byt null!!!
    - âœ… vlozit emoji do db
    - âœ… message preparer
    - âœ… message priprava pomoci stringbuilderu

-----------------------
ZRUÅ ENO
    - ğŸ…¾ï¸ pridat defalut enumy a dat je mezi podporovane typy - countries, currency, 
    - ğŸ…¾ï¸ pridat prava CRUD+user password change -> bude je mit jen admin a bude je moct nastavovat jen admin -> jinak se da heslo zmenit poj v nastaveni prihlaseneho uzivatele
    - ğŸ…¾ï¸ preklady se budou moct delat v app 
        - ğŸ…¾ï¸ bude tam form na odeslani zadosti o pridani noveho jayzka
    - ğŸ…¾ï¸ mazani rights z cache jen pro konkretni id
    - ğŸ…¾ï¸ moznost menit barvu pozadi radku
    - ğŸ…¾ï¸ odhlasovat pri erroru jako napr nenalayen deskriptor aplikace uyivatele?
    - ğŸ…¾ï¸ do db a app user.language
    - ğŸ…¾ï¸ ukladat JSON do DB pekne zformatovany
    - ğŸ…¾ï¸ moznost smazani aplikace
    - ğŸ…¾ï¸ moznost exportu dat
    - ğŸ…¾ï¸ cache, ktera se postupne uci, ktera data jsou nejpouzivanejsi a ty si bude pamatovat
    - ğŸ…¾ï¸ pridat stranku, na kterou si admin muze napsat co chce - navod na pouzivani konkretni aplikace 
    ï¸- ğŸ…¾ï¸ pridat do db k datasetum created_by a modified_by
    - ğŸ…¾ï¸ â“ co vsechno muze prihlaseny uzivatel menit na svych user data?
    - ğŸ…¾ï¸ pridani jayzka do descriptoru
    - ğŸ…¾ï¸ lokalizovat zobrazeni data nebo to dat do nastaveni
    - ğŸ…¾ï¸ odhlaseni na serveru - to vlastne nedava smysl - kdyz se odhlasim z webove aplikace, tak nechci odhlasit i z mobilni aplikace
    - ğŸ…¾ï¸ AccountService.GetApplicationDescriptorByAppName dat nekam jinam
    - ğŸ…¾ï¸ metoda na kontrolu tokenu a appname do Validations
    - ï¸ï¸ï¸ï¸ï¸ğŸ…¾ï¸ udelat a dat app name validator nekam zvlast
    - ğŸ…¾ï¸ if user deleted, log him out first
    - ğŸ…¾ï¸ pouzivat [HttpPatch]?
            - https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b
                - spis se chovam jako put, navic patch neni soucastio httpclienta
    - ğŸ…¾ï¸ JSON VALIDACE 
        - ğŸ…¾ï¸ ukladat app descriptor jako indented https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Formatting.htm
        - ğŸ…¾ï¸ reference nevede sama na sebe
        - ğŸ…¾ï¸ reference nejsou v USER datasetu
        - ğŸ…¾ï¸ nazvy atributu nesmi byt BDId a RIGHTSId
    
    

-----------------------
ğŸ‘ HOSTING
    - porovnani: https://www.hledej-hosting.cz/hledat/webhosting-net/?
    - https://www.aspone.cz/cz/Webhosting/Freehosting/
    - https://www.asp2.cz/
    - https://www.aspify.com/cz/webhosting/aspnet-freehosting/ - nejvice mista

    - deploy dat
        - cd RazorWebApp
        - dotnet build
        - dotnet publish
        - ...RazorWebApp/bin/Debug/netcoreapp2.0/publish/
        - https://stackoverflow.com/questions/39238850/how-to-set-aspnetcore-environment-in-publish-file
    - databaze
        - zkopirovat
        - ğŸ‘ jak vygenerovat novou?
    - ğŸ‘ ukazkove aplikace?

---------

JSON requirements
- minimal required structure:
    - AppName (one)
    - DefaultLanguage (one) - z nejakeho oficialniho enumu, pokusim se na nej napasovat preklad, pokud preklad pro ten jazyk nebude existovat, bere se en
    - Users (one)
        - PasswordAttribute
        - Attributes
            - Username
    - Datasets (one)
        - 
- pokud nebude v atributu nullable, bere se jako true
- pokud nebude v atributu unique, bere se jako false
- pokud nebude uvedena u atributu max hodnota, bere se jako null, tedy nekonecno
- v podstate se nemusi uvadet zadna false hodnota, protoze ta se nastavi default
- atribut Name nesmi byt nazev podporovaneho typu (jako treba bool, int, currency (ale muze byt Currency)) - kvuli if v _InputBuilderPartial




- podporovanÃ© typy dat:
    - stringğŸ†—, intğŸ†—, floatğŸ†—
    - dateğŸ†—, timeğŸ†—, datetimeğŸ†— (kalendare a timepickery)
    - yearğŸ†— 
    - systÃ©movÃ½ dataset Users ğŸ†— 
    - uÅ¾ivatelskÃ© datasety (=dajÃ­ se pomocÃ­ nich vyjÃ¡dÅ™it enumy) - v roletce bude zobrazeno 1. - 3. sloupec ğŸ†— 
    - textğŸ†— - multiline
    - urlğŸ†—
    - colorğŸ†— - na zmenu barvy prostredi?
    - emailğŸ†—
    - username ğŸ†— - pouze v User datasetu a pouze 1x
    - password ğŸ†— - pouze v User datasetu v password attribute
    - bool ğŸ†— 

    - required pro libovolny typ

    - min/max pro int, float ... TODO pro date, time, datetime

- atributy
    ğŸ†— "Name": vsechno, povinne, unikatni
    ğŸ†— "Description": vsechno, nepovinny
    ğŸ†— "Type": vsechno, povinne, na vyber z podporovanych typu
    ğŸ†— "Required": vsechno, true x false, nepovinny
    ğŸ…¾ï¸ "Unique": TODO
    ğŸ†— "Safer": true x false, jen password TODO test
    ğŸ†— "Min": cislo, jen pro int, float, reference, a nove i jen pro string, text, username, password
    ğŸ†— "Max": cislo, jen pro int, float, reference, a nove i jen pro string, text, username, password


- podminky
    - zadne datasety se nesmi jmenovat stejne

- system datasety
    - uz obsahuji prava









